import './polyfills.server.mjs';
import{b as N,d as D}from"./chunk-ZYS5XCCG.mjs";import{a as E}from"./chunk-KX3P2BBH.mjs";import{a as P}from"./chunk-SKN4S5F7.mjs";import{d as M,e as x}from"./chunk-T2CJTV2K.mjs";import{Ab as r,Bb as s,Cb as l,Mb as y,Na as g,Ob as C,Ra as o,_a as p,bc as u,cc as w,dc as f,eb as I,gd as F,nc as c,nd as O,oc as T,pd as k,sc as b,tb as h,tc as _,ub as S,zb as a}from"./chunk-7YNU2WAY.mjs";var R=n=>["/tour",n],J=(n,t)=>({"fa-heart":!0,"fa-regular":n,"fa-solid":t});function L(n,t){if(n&1&&(r(0,"span",9),l(1,"i",15),u(2),s(),l(3,"i",16)),n&2){let i=C();o(2),f(" ",i.tour.destinations[0].title," ")}}var z=class n{constructor(t,i,e,m){this._DataService=t;this.toaster=i;this._Router=e;this.translate=m}layoutType="grid";tour;favs=[];favouriteIds=[];alltours=[];ngOnInit(){this.loadFavouritesFromStorage()}loadFavouritesFromStorage(){if(typeof window<"u"&&typeof localStorage<"u"){let t=localStorage.getItem("favouriteIds");this.favouriteIds=t?JSON.parse(t):[]}}saveFavouritesToStorage(){if(typeof window<"u"&&typeof localStorage<"u"){let t=localStorage.getItem("favouriteIds"),i=t?JSON.parse(t):[],e=[...new Set([...i,...this.favouriteIds])];localStorage.setItem("favouriteIds",JSON.stringify(e)),this.favouriteIds=e}}addFav(t,i){if(i.stopPropagation(),!localStorage.getItem("accessToken")){this.toaster.error(this.translate.instant("common.youMustHaveAccount")),this._Router.navigate(["/login"]);return}this.loadFavouritesFromStorage();let e=this.favouriteIds.indexOf(t),m=e>-1;m?(this.favouriteIds.splice(e,1),localStorage.setItem("favouriteIds",JSON.stringify(this.favouriteIds))):(this.favouriteIds.includes(t)||this.favouriteIds.push(t),this.saveFavouritesToStorage()),this._DataService.toggleWishlist(t).subscribe({next:d=>{this.favs=d},error:d=>{if(m)this.favouriteIds.includes(t)||this.favouriteIds.push(t),this.saveFavouritesToStorage();else{let v=this.favouriteIds.indexOf(t);v>-1&&this.favouriteIds.splice(v,1),localStorage.setItem("favouriteIds",JSON.stringify(this.favouriteIds))}this.toaster.error(d.error.message)}})}static \u0275fac=function(i){return new(i||n)(p(P),p(E),p(M),p(N))};static \u0275cmp=I({type:n,selectors:[["app-tour-cart"]],inputs:{layoutType:"layoutType",tour:"tour"},decls:24,vars:22,consts:[["role","button",1,"tour","align-items-center","rounded-3","overflow-hidden","border","transition","p-2","ms-1","mb-1",3,"routerLink","ngClass"],[1,"px-0",3,"ngClass"],[1,"img-Hover","rounded-2","overflow-hidden","position-relative","mb-0"],["height","200px","loading","lazy",1,"w-100","transition",3,"src","alt","title"],[1,"textMainColor","fs-5","fw-bold","position-absolute","top-0","end-0","m-2",3,"click"],[1,"fa","fa-heart",3,"ngClass"],[1,"p-2",3,"ngClass"],[1,"text-capitalize","transition","cPointer",3,"routerLink"],[1,"fontsm","d-flex","align-items-center"],[1,"me-2"],[1,"flexBetween","mt-2","flex-wrap"],[1,"mainBtn","text-nowrap"],[1,"fas","fa-arrow-trend-up","ms-1"],[1,"mb-0","text-capitalize"],[1,"textMainColor","fs-5"],[1,"fas","fa-location-dot","me-1","textSecondColor"],[1,"fa","fa-arrows-left-right","mx-2","textSecondColor"]],template:function(i,e){i&1&&(r(0,"div",0)(1,"div",1)(2,"figure",2),l(3,"img",3),r(4,"span",4),y("click",function(d){return e.tour&&e.tour.id&&e.addFav(e.tour.id,d)}),l(5,"i",5),s()()(),r(6,"div",6)(7,"figcaption")(8,"h3",7),u(9),s(),r(10,"div",8),h(11,L,4,1),r(12,"span",9),u(13),s()(),r(14,"div",10)(15,"button",11),u(16," Book Now "),l(17,"i",12),s(),r(18,"p",13),u(19," per person "),l(20,"br"),r(21,"b",14),u(22),b(23,"currency"),s()()()()()()),i&2&&(a("routerLink",c(15,R,e.tour==null?null:e.tour.slug))("ngClass",e.layoutType==="grid"?"row gx-3 flex-column":"row gx-3 flex-wrap"),o(),a("ngClass",e.layoutType==="grid"?"":" col-md-5"),o(2),a("src",e.tour==null?null:e.tour.featured_image,g)("alt",e.tour==null?null:e.tour.title)("title",e.tour==null?null:e.tour.title),o(2),a("ngClass",T(17,J,e.tour&&e.tour.id?!e.favouriteIds.includes(e.tour.id):!0,e.tour&&e.tour.id?e.favouriteIds.includes(e.tour.id):!1)),o(),a("ngClass",e.layoutType==="grid"?"":" col-md-7"),o(2),a("routerLink",c(20,R,e.tour==null?null:e.tour.slug)),o(),f(" ",e.tour==null?null:e.tour.title," "),o(2),S(e.tour&&e.tour.destinations&&e.tour.destinations.length>0?11:-1),o(2),f(" ",e.tour==null?null:e.tour.duration," "),o(9),w(_(23,13,e.tour==null?null:e.tour.start_from)))},dependencies:[x,k,F,D,O],styles:[".tour[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;height:45px;color:#110f0f;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}.tour[_ngcontent-%COMP%]:hover   h3[_ngcontent-%COMP%]{color:#1781fe}"]})};export{z as a};
