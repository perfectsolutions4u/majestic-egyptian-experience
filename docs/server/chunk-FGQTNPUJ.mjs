import './polyfills.server.mjs';
import{a as L}from"./chunk-WXVHVKFO.mjs";import{a as B}from"./chunk-BZMZPU7X.mjs";import"./chunk-ZYS5XCCG.mjs";import{a as y}from"./chunk-KX3P2BBH.mjs";import"./chunk-PFASEQHQ.mjs";import"./chunk-SKN4S5F7.mjs";import"./chunk-UXIQEXPC.mjs";import{a as D}from"./chunk-56BUFAXK.mjs";import{a as I}from"./chunk-BODN4R2M.mjs";import{e as T}from"./chunk-T2CJTV2K.mjs";import{Ab as r,Bb as o,Cb as l,Mb as S,Nc as k,Ob as _,Ra as n,_a as s,bc as a,cc as b,eb as u,mc as x,tb as C,ub as g,vb as v,xb as h,yb as f,zb as m}from"./chunk-7YNU2WAY.mjs";import{a as p,b as d}from"./chunk-T55IDOPT.mjs";var M=()=>["/checkout"];function w(i,t){if(i&1&&(r(0,"div",10),l(1,"app-tour-cart",11),o()),i&2){let e=t.$implicit;n(),m("tour",e.tour)}}function F(i,t){if(i&1&&(r(0,"div",5),h(1,w,2,1,"div",10,v),o()),i&2){let e=_();n(),f(e.tourCart)}}function O(i,t){i&1&&(r(0,"div",6)(1,"p",12),a(2,"Your cart is empty"),o()())}var j=class i{constructor(t,e,c,E){this.seoService=t;this._BookingService=e;this.toaster=c;this._cdr=E}tourCart=[];haveData=!1;backgroundImage="../../../assets/image/cart-banner.jpg";ngOnInit(){this.seoService.updateSeoData({},"majestic - Cart","Manage your cart, bookings, and preferences with majestic egyptian experience. Access your account dashboard.","../../../assets/image/majestic-logo.svg"),this.getListCart()}getListCart(){this._BookingService.getCartList().subscribe({next:t=>{setTimeout(()=>{this.tourCart=t.data,console.log("tourCart",this.tourCart),this.tourCart.length===0?this.haveData=!1:(this.haveData=!0,this.tourCart=t.data.map(e=>d(p({},e),{totalPrice:e.adults*e.tour.adult_price+e.children*e.tour.child_price+e.infants*e.tour.infant_price}))),this._cdr.markForCheck()},0)}})}deleteTourCart(t){this._BookingService.deleteTourCart(t).subscribe({next:e=>{console.log("deleteTourCart",e.data),this.toaster.success(e.message),setTimeout(()=>{this.getListCart()},0)},error:e=>{this.toaster.error(e.error.message)}})}clearTourCart(){this._BookingService.clearTourCart().subscribe({next:t=>{console.log("clearTourCart",t.data),this.toaster.success(t.message),setTimeout(()=>{this.getListCart()},0)},error:t=>{this.toaster.error(t.error.message)}})}static \u0275fac=function(e){return new(e||i)(s(I),s(L),s(y),s(k))};static \u0275cmp=u({type:i,selectors:[["app-cart"]],decls:17,vars:7,consts:[[3,"title","subtitle","backgroundImage"],[1,"my-5"],[1,"container","mx-auto","text-center"],[1,"h1"],[1,"textMainColor"],[1,"row","g-3","my-4"],[1,"text-center"],[1,"text-center","flexCenter","gap-3","mt-4"],[1,"secBtn",3,"click"],[1,"btn-success","btn","py-2","px-3","text-white","rounded-3",3,"routerLink"],[1,"col-md-6","col-lg-4"],[3,"tour"],[1,"fs-2","textMainColor"]],template:function(e,c){e&1&&(l(0,"app-banner",0),r(1,"section",1)(2,"div",2)(3,"h3",3),a(4,"Shopping Cart"),o(),r(5,"p"),a(6," Your cart have "),r(7,"span",4),a(8),o(),a(9," items to book "),o(),C(10,F,3,0,"div",5)(11,O,3,0,"div",6),r(12,"div",7)(13,"button",8),S("click",function(){return c.clearTourCart()}),a(14,"Clear Cart"),o(),r(15,"button",9),a(16," Checkout "),o()()()()),e&2&&(m("title","Shopping Cart")("subtitle","Life is better with a full cart.")("backgroundImage",c.backgroundImage),n(8),b(c.tourCart.length),n(2),g(c.haveData?10:11),n(5),m("routerLink",x(6,M)))},dependencies:[B,T,D],styles:[".cart-container[_ngcontent-%COMP%]{padding:2rem}"]})};export{j as CartComponent};
