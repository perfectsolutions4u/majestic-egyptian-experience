import './polyfills.server.mjs';
import{a as F}from"./chunk-ECHNOGLO.mjs";import{a as w}from"./chunk-NEF2F25B.mjs";import{a as E}from"./chunk-SKN4S5F7.mjs";import"./chunk-UXIQEXPC.mjs";import{a as j}from"./chunk-56BUFAXK.mjs";import{a as T}from"./chunk-BODN4R2M.mjs";import"./chunk-T2CJTV2K.mjs";import{Ab as a,Bb as o,Cb as g,Fa as D,I as u,Jb as b,Mb as k,Nc as R,Ob as c,Ra as r,V as C,_a as s,bc as m,eb as x,ha as h,ia as v,pd as y,sd as f,tb as d,ub as l,xb as S,yb as I,zb as p}from"./chunk-7YNU2WAY.mjs";import"./chunk-T55IDOPT.mjs";var P=(t,n)=>n.id;function M(t,n){if(t&1&&(a(0,"div",7),g(1,"app-destination-cart",9),o()),t&2){let e=n.$implicit;r(),p("destination",e)}}function N(t,n){if(t&1){let e=b();a(0,"app-pagination",10),k("pageChange",function(_){h(e);let O=c(2);return v(O.onPageChange(_))}),o()}if(t&2){let e=c(2);p("current_page",e.apiResponse.current_page)("total",e.apiResponse.total)("per_page",e.apiResponse.per_page)("from",e.apiResponse.from)("to",e.apiResponse.to)}}function V(t,n){if(t&1&&(a(0,"div",6),S(1,M,2,1,"div",7,P),o(),d(3,N,1,5,"app-pagination",8)),t&2){let e=c();r(),I(e.allDestinations),r(2),l(e.apiResponse.total>e.apiResponse.per_page?3:-1)}}function B(t,n){t&1&&(a(0,"div",5)(1,"p",11),m(2,"No destinations found."),o()())}var L=class t{constructor(n,e,i,_){this.seoService=n;this.dataService=e;this.cdr=i;this.platformId=_}backgroundImage="../../../assets/image/banner.webp";allDestinations=[];hasLoaded=!1;apiResponse={current_page:1,total:0,from:0,to:0,per_page:15};ngOnInit(){this.seoService.updateSeoData({},"majestic - Destination","Explore our destinations","../../../assets/image/majestic-logo.svg"),this.getDestination()}getDestination(n=1){let e=this.dataService.getFromLocalStorage("majestic_destinations");e?.data?.data?(this.allDestinations=e.data.data.data||[],this.hasLoaded=!0,f(this.platformId)&&setTimeout(()=>{this.cdr.markForCheck()},0)):this.dataService.getDestination(n).pipe(C(i=>{this.allDestinations=i.data?.data||[],this.apiResponse={current_page:i.data?.current_page||1,total:i.data?.total||0,from:i.data?.from||0,to:i.data?.to||0,per_page:i.data?.per_page||15},this.hasLoaded=!0,f(this.platformId)?setTimeout(()=>{this.cdr.markForCheck()},0):this.cdr.detectChanges()}),u(()=>{this.cdr.markForCheck()})).subscribe({next:()=>{},error:i=>{console.error("Error fetching destinations:",i),this.allDestinations=[],this.hasLoaded=!0,this.cdr.markForCheck()}})}onPageChange(n){this.getDestination(n)}static \u0275fac=function(e){return new(e||t)(s(T),s(E),s(R),s(D))};static \u0275cmp=x({type:t,selectors:[["app-destination"]],decls:10,vars:4,consts:[[3,"title","subtitle","backgroundImage"],[1,"container","text-center","my-5","mx-auto"],[1,"h1"],[1,"my-5"],[1,"container"],[1,"text-center","py-5"],[1,"row","g-3","mt-4"],[1,"col-lg-3","col-md-4","col-sm-6"],[3,"current_page","total","per_page","from","to"],[3,"destination"],[3,"pageChange","current_page","total","per_page","from","to"],[1,"text-muted"]],template:function(e,i){e&1&&(g(0,"app-banner",0),a(1,"div",1)(2,"h2",2),m(3,"Our Destinations"),o(),a(4,"p"),m(5,"Explore our destinations"),o()(),a(6,"section",3)(7,"div",4),d(8,V,4,1)(9,B,3,0,"div",5),o()()),e&2&&(p("title","Destinations")("subtitle","Explore our destinations")("backgroundImage",i.backgroundImage),r(8),l(i.allDestinations.length>0?8:i.hasLoaded?9:-1))},dependencies:[y,F,w,j],styles:[".destination-container[_ngcontent-%COMP%]{padding:2rem}"]})};export{L as DestinationComponent};
