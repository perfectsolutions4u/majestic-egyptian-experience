import './polyfills.server.mjs';
import{a as T}from"./chunk-NEF2F25B.mjs";import{a as j}from"./chunk-BL5JLPD5.mjs";import{a as y}from"./chunk-SKN4S5F7.mjs";import"./chunk-UXIQEXPC.mjs";import{a as E}from"./chunk-56BUFAXK.mjs";import{a as D}from"./chunk-BODN4R2M.mjs";import"./chunk-T2CJTV2K.mjs";import{Ab as i,Bb as n,Cb as d,Fa as v,I as _,Jb as S,Mb as I,Nc as R,Ob as s,Ra as r,V as C,_a as p,bc as c,eb as b,ha as u,ia as h,sd as k,tb as g,ub as m,xb as B,yb as x,zb as l}from"./chunk-7YNU2WAY.mjs";import"./chunk-T55IDOPT.mjs";var O=(t,o)=>o.id;function P(t,o){if(t&1&&(i(0,"div",7),d(1,"app-blog-cart",9),n()),t&2){let e=o.$implicit;r(),l("blog",e)}}function F(t,o){if(t&1){let e=S();i(0,"app-pagination",10),I("pageChange",function(f){u(e);let w=s(2);return h(w.onPageChange(f))}),n()}if(t&2){let e=s(2);l("current_page",e.apiResponse.current_page)("total",e.apiResponse.total)("per_page",e.apiResponse.per_page)("from",e.apiResponse.from)("to",e.apiResponse.to)}}function M(t,o){if(t&1&&(i(0,"div",6),B(1,P,2,1,"div",7,O),n(),g(3,F,1,5,"app-pagination",8)),t&2){let e=s();r(),x(e.listBlog),r(2),m(e.apiResponse.total>e.apiResponse.per_page?3:-1)}}function N(t,o){t&1&&(i(0,"div",5)(1,"p",11),c(2,"No blogs found."),n()())}var L=class t{constructor(o,e,a,f){this.seoService=o;this.dataService=e;this.cdr=a;this.platformId=f}backgroundImage="../../../assets/image/banner.webp";listBlog=[];hasLoaded=!1;apiResponse={current_page:1,total:0,from:0,to:0,per_page:15};ngOnInit(){this.seoService.updateSeoData({},"majestic - Blog","Explore our latest travel insights and stories.","../../../assets/image/majestic-logo.svg"),this.getListBlog()}getListBlog(o=1){this.dataService.getBlogs(o).pipe(C(e=>{this.listBlog=e.data?.data||[],console.log("listBlog",this.listBlog),this.apiResponse={current_page:e.data?.current_page||1,total:e.data?.total||0,from:e.data?.from||0,to:e.data?.to||0,per_page:e.data?.per_page||15},this.hasLoaded=!0,k(this.platformId)?setTimeout(()=>{this.cdr.markForCheck()},0):this.cdr.detectChanges()}),_(()=>{this.cdr.markForCheck()})).subscribe({next:()=>{},error:e=>{console.error("Error fetching blogs:",e),this.listBlog=[],this.hasLoaded=!0,this.cdr.markForCheck()}})}onPageChange(o){this.getListBlog(o)}static \u0275fac=function(e){return new(e||t)(p(D),p(y),p(R),p(v))};static \u0275cmp=b({type:t,selectors:[["app-blog"]],decls:10,vars:4,consts:[[3,"title","subtitle","backgroundImage"],[1,"container","text-center","my-5","mx-auto"],[1,"h1"],[1,"my-5"],[1,"container"],[1,"text-center","py-5"],[1,"row","g-3"],[1,"col-md-6"],[3,"current_page","total","per_page","from","to"],[3,"blog"],[3,"pageChange","current_page","total","per_page","from","to"],[1,"text-muted"]],template:function(e,a){e&1&&(d(0,"app-banner",0),i(1,"div",1)(2,"h2",2),c(3,"Our Blogs"),n(),i(4,"p"),c(5,"Read our latest blog posts"),n()(),i(6,"section",3)(7,"div",4),g(8,M,4,1)(9,N,3,0,"div",5),n()()),e&2&&(l("title","Blogs")("subtitle","Explore our latest travel insights and stories.")("backgroundImage",a.backgroundImage),r(8),m(a.listBlog.length>0?8:a.hasLoaded?9:-1))},dependencies:[E,j,T],styles:[".blog-container[_ngcontent-%COMP%]{padding:2rem}"]})};export{L as BlogComponent};
